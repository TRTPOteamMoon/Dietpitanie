# Часть 1.
## Проектирование архитектуры
1. Тип приложения - десктопное приложение.
2. Стратегия развёртывания - установка с компакт диска.
3. Выбранные технологии:
    * C# - выбран для разработки клиента приложения. Выбран из-за того, что в нём много полезных библиотек и прост в использовании для людей знакомых с C++.
    * SQLite - выбран для организации хранения данных приложением. Выбран из-за того, что для работы с ним не нужно устанавливать дополнительное ПО, а всего лишь нужно добавить библиотеку.
4. Показатели качества:
    * удобство использования
    * надёжность
    * эффективность
5. Пути реализации сквозной функциональности:
    * Авторизация - использование собственной системы авторизации
    * Валидация - проверка всех вводимых данных
    * Управление исключениями - перехват исключений разных слоях приложения и уведомление об их наличии
    * Управление конфигурацией - данные пользователя будут сохряняться для последующего использования  
6. Структурная схема приложения:
    ![](https://github.com/TRTPOteamMoon/Dietpitanie/blob/master/Lab4/Scheme1.jpg)
# Часть 2.
## Анализ архитектуры
1. Проведём анализ текущеё архитектуры, выделив основные блоки: десктопное приложение состоит из базы данных и самого клиента, что позволяет изменять приложения не затрагивая данных или наоборот.
2. Текущая архитектура: 
![](https://github.com/TRTPOteamMoon/Dietpitanie/blob/master/Lab4/Scheme2.jpg)
3. Сгенерирования диаграмма классов(после рефакторинга):
![](https://github.com/TRTPOteamMoon/Dietpitanie/blob/master/Lab4/Dietpitanie.jpg)
# Часть 3.
## Сравнение и рефакторинг
1. В "As is" нет отдельных блоков для работы с базой данных и логикой как в "To be"
2. Для улучшения текущей архитектуры были предприняты следующие меры по улучшению архитектуры:
* Выделение классов: появились следующие классы: DBController(для работы с базой данных), FoodList, DishList, MenuMaker, Dish, Food (для работы с данными о продуктах и блюдах).
* Инкапсуляция поля: данные о вычислениях параметров были перенесены в класс Human, данные о продуктах и блюдах были перенесены в классы DishList и FoodList.
* Извлечение метода: методы подключение и отключения к бызе данных и методы получения данных из неё были перенесены в класс DBController/
* Замена переменной вызовом метода: для вывода данных о необходимых макроэлементах и калориях пользователя получаются с помощью метода get из класса Human.
3. В ходе рефакторинга структурная схема приняла следующий вид:
![](https://github.com/TRTPOteamMoon/Dietpitanie/blob/master/Lab4/Scheme3.jpg)

# Вывод
Благодаря анализу арихитектуры текущей версии приложения были предприняты меры по приведению текущей архитектуры к запланированной. В ходе этого приведения был произведён рефакторинг кода, что сильно отразилось на качестве кода.